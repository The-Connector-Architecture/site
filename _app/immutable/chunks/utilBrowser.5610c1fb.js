import{c as F}from"./singletons.a4b4eb3c.js";import{w as we}from"./index.b08b6dbb.js";F.disable_scroll_handling;const yt=F.goto;F.invalidate;F.invalidateAll;F.preload_data;F.preload_code;F.before_navigate;F.after_navigate;var me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ye(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}const H=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};var y=[],w=[],Ee=typeof Uint8Array<"u"?Uint8Array:Array,q=!1;function te(){q=!0;for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=i.length;e<t;++e)y[e]=i[e],w[i.charCodeAt(e)]=e;w["-".charCodeAt(0)]=62,w["_".charCodeAt(0)]=63}function Re(i){q||te();var e,t,r,n,a,s,h=i.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a=i[h-2]==="="?2:i[h-1]==="="?1:0,s=new Ee(h*3/4-a),r=a>0?h-4:h;var l=0;for(e=0,t=0;e<r;e+=4,t+=3)n=w[i.charCodeAt(e)]<<18|w[i.charCodeAt(e+1)]<<12|w[i.charCodeAt(e+2)]<<6|w[i.charCodeAt(e+3)],s[l++]=n>>16&255,s[l++]=n>>8&255,s[l++]=n&255;return a===2?(n=w[i.charCodeAt(e)]<<2|w[i.charCodeAt(e+1)]>>4,s[l++]=n&255):a===1&&(n=w[i.charCodeAt(e)]<<10|w[i.charCodeAt(e+1)]<<4|w[i.charCodeAt(e+2)]>>2,s[l++]=n>>8&255,s[l++]=n&255),s}function Fe(i){return y[i>>18&63]+y[i>>12&63]+y[i>>6&63]+y[i&63]}function Ae(i,e,t){for(var r,n=[],a=e;a<t;a+=3)r=(i[a]<<16)+(i[a+1]<<8)+i[a+2],n.push(Fe(r));return n.join("")}function V(i){q||te();for(var e,t=i.length,r=t%3,n="",a=[],s=16383,h=0,l=t-r;h<l;h+=s)a.push(Ae(i,h,h+s>l?l:h+s));return r===1?(e=i[t-1],n+=y[e>>2],n+=y[e<<4&63],n+="=="):r===2&&(e=(i[t-2]<<8)+i[t-1],n+=y[e>>10],n+=y[e>>4&63],n+=y[e<<2&63],n+="="),a.push(n),a.join("")}function k(i,e,t,r,n){var a,s,h=n*8-r-1,l=(1<<h)-1,o=l>>1,_=-7,f=t?n-1:0,d=t?-1:1,p=i[e+f];for(f+=d,a=p&(1<<-_)-1,p>>=-_,_+=h;_>0;a=a*256+i[e+f],f+=d,_-=8);for(s=a&(1<<-_)-1,a>>=-_,_+=r;_>0;s=s*256+i[e+f],f+=d,_-=8);if(a===0)a=1-o;else{if(a===l)return s?NaN:(p?-1:1)*(1/0);s=s+Math.pow(2,r),a=a-o}return(p?-1:1)*s*Math.pow(2,a-r)}function re(i,e,t,r,n,a){var s,h,l,o=a*8-n-1,_=(1<<o)-1,f=_>>1,d=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,c=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(h=isNaN(e)?1:0,s=_):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+f>=1?e+=d/l:e+=d*Math.pow(2,1-f),e*l>=2&&(s++,l/=2),s+f>=_?(h=0,s=_):s+f>=1?(h=(e*l-1)*Math.pow(2,n),s=s+f):(h=e*Math.pow(2,f-1)*Math.pow(2,n),s=0));n>=8;i[t+p]=h&255,p+=c,h/=256,n-=8);for(s=s<<n|h,o+=n;o>0;i[t+p]=s&255,p+=c,s/=256,o-=8);i[t+p-c]|=g*128}var Ie={}.toString,ie=Array.isArray||function(i){return Ie.call(i)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var Te=50;u.TYPED_ARRAY_SUPPORT=H.TYPED_ARRAY_SUPPORT!==void 0?H.TYPED_ARRAY_SUPPORT:!0;C();function C(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function R(i,e){if(C()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(i=new Uint8Array(e),i.__proto__=u.prototype):(i===null&&(i=new u(e)),i.length=e),i}function u(i,e,t){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(i,e,t);if(typeof i=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return G(this,i)}return ne(this,i,e,t)}u.poolSize=8192;u._augment=function(i){return i.__proto__=u.prototype,i};function ne(i,e,t,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?ve(i,e,t,r):typeof e=="string"?Se(i,e,t):Ne(i,e)}u.from=function(i,e,t){return ne(null,i,e,t)};u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&u[Symbol.species]);function se(i){if(typeof i!="number")throw new TypeError('"size" argument must be a number');if(i<0)throw new RangeError('"size" argument must not be negative')}function Pe(i,e,t,r){return se(e),e<=0?R(i,e):t!==void 0?typeof r=="string"?R(i,e).fill(t,r):R(i,e).fill(t):R(i,e)}u.alloc=function(i,e,t){return Pe(null,i,e,t)};function G(i,e){if(se(e),i=R(i,e<0?0:z(e)|0),!u.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)i[t]=0;return i}u.allocUnsafe=function(i){return G(null,i)};u.allocUnsafeSlow=function(i){return G(null,i)};function Se(i,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!u.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var r=ae(e,t)|0;i=R(i,r);var n=i.write(e,t);return n!==r&&(i=i.slice(0,n)),i}function Y(i,e){var t=e.length<0?0:z(e.length)|0;i=R(i,t);for(var r=0;r<t;r+=1)i[r]=e[r]&255;return i}function ve(i,e,t,r){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(r||0))throw new RangeError("'length' is out of bounds");return t===void 0&&r===void 0?e=new Uint8Array(e):r===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,r),u.TYPED_ARRAY_SUPPORT?(i=e,i.__proto__=u.prototype):i=Y(i,e),i}function Ne(i,e){if(E(e)){var t=z(e.length)|0;return i=R(i,t),i.length===0||e.copy(i,0,0,t),i}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||We(e.length)?R(i,0):Y(i,e);if(e.type==="Buffer"&&ie(e.data))return Y(i,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function z(i){if(i>=C())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+C().toString(16)+" bytes");return i|0}u.isBuffer=Je;function E(i){return!!(i!=null&&i._isBuffer)}u.compare=function(e,t){if(!E(e)||!E(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,a=0,s=Math.min(r,n);a<s;++a)if(e[a]!==t[a]){r=e[a],n=t[a];break}return r<n?-1:n<r?1:0};u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};u.concat=function(e,t){if(!ie(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return u.alloc(0);var r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){var s=e[r];if(!E(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,a),a+=s.length}return n};function ae(i,e){if(E(i))return i.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(i)||i instanceof ArrayBuffer))return i.byteLength;typeof i!="string"&&(i=""+i);var t=i.length;if(t===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return B(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return _e(i).length;default:if(r)return B(i).length;e=(""+e).toLowerCase(),r=!0}}u.byteLength=ae;function je(i,e,t){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(i||(i="utf8");;)switch(i){case"hex":return Ye(this,e,t);case"utf8":case"utf-8":return fe(this,e,t);case"ascii":return $e(this,e,t);case"latin1":case"binary":return Oe(this,e,t);case"base64":return Me(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qe(this,e,t);default:if(r)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),r=!0}}u.prototype._isBuffer=!0;function I(i,e,t){var r=i[e];i[e]=i[t],i[t]=r}u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)I(this,t,t+1);return this};u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)I(this,t,t+3),I(this,t+1,t+2);return this};u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)I(this,t,t+7),I(this,t+1,t+6),I(this,t+2,t+5),I(this,t+3,t+4);return this};u.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?fe(this,0,e):je.apply(this,arguments)};u.prototype.equals=function(e){if(!E(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:u.compare(this,e)===0};u.prototype.inspect=function(){var e="",t=Te;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};u.prototype.compare=function(e,t,r,n,a){if(!E(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),r===void 0&&(r=e?e.length:0),n===void 0&&(n=0),a===void 0&&(a=this.length),t<0||r>e.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&t>=r)return 0;if(n>=a)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,a>>>=0,this===e)return 0;for(var s=a-n,h=r-t,l=Math.min(s,h),o=this.slice(n,a),_=e.slice(t,r),f=0;f<l;++f)if(o[f]!==_[f]){s=o[f],h=_[f];break}return s<h?-1:h<s?1:0};function ue(i,e,t,r,n){if(i.length===0)return-1;if(typeof t=="string"?(r=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=n?0:i.length-1),t<0&&(t=i.length+t),t>=i.length){if(n)return-1;t=i.length-1}else if(t<0)if(n)t=0;else return-1;if(typeof e=="string"&&(e=u.from(e,r)),E(e))return e.length===0?-1:Z(i,e,t,r,n);if(typeof e=="number")return e=e&255,u.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(i,e,t):Uint8Array.prototype.lastIndexOf.call(i,e,t):Z(i,[e],t,r,n);throw new TypeError("val must be string, number or Buffer")}function Z(i,e,t,r,n){var a=1,s=i.length,h=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(i.length<2||e.length<2)return-1;a=2,s/=2,h/=2,t/=2}function l(p,c){return a===1?p[c]:p.readUInt16BE(c*a)}var o;if(n){var _=-1;for(o=t;o<s;o++)if(l(i,o)===l(e,_===-1?0:o-_)){if(_===-1&&(_=o),o-_+1===h)return _*a}else _!==-1&&(o-=o-_),_=-1}else for(t+h>s&&(t=s-h),o=t;o>=0;o--){for(var f=!0,d=0;d<h;d++)if(l(i,o+d)!==l(e,d)){f=!1;break}if(f)return o}return-1}u.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1};u.prototype.indexOf=function(e,t,r){return ue(this,e,t,r,!0)};u.prototype.lastIndexOf=function(e,t,r){return ue(this,e,t,r,!1)};function Ce(i,e,t,r){t=Number(t)||0;var n=i.length-t;r?(r=Number(r),r>n&&(r=n)):r=n;var a=e.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var s=0;s<r;++s){var h=parseInt(e.substr(s*2,2),16);if(isNaN(h))return s;i[t+s]=h}return s}function Be(i,e,t,r){return M(B(e,i.length-t),i,t,r)}function he(i,e,t,r){return M(Ve(e),i,t,r)}function ke(i,e,t,r){return he(i,e,t,r)}function Ue(i,e,t,r){return M(_e(e),i,t,r)}function De(i,e,t,r){return M(Ze(e,i.length-t),i,t,r)}u.prototype.write=function(e,t,r,n){if(t===void 0)n="utf8",r=this.length,t=0;else if(r===void 0&&typeof t=="string")n=t,r=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(r)?(r=r|0,n===void 0&&(n="utf8")):(n=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var a=this.length-t;if((r===void 0||r>a)&&(r=a),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return Ce(this,e,t,r);case"utf8":case"utf-8":return Be(this,e,t,r);case"ascii":return he(this,e,t,r);case"latin1":case"binary":return ke(this,e,t,r);case"base64":return Ue(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return De(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}};u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Me(i,e,t){return e===0&&t===i.length?V(i):V(i.slice(e,t))}function fe(i,e,t){t=Math.min(i.length,t);for(var r=[],n=e;n<t;){var a=i[n],s=null,h=a>239?4:a>223?3:a>191?2:1;if(n+h<=t){var l,o,_,f;switch(h){case 1:a<128&&(s=a);break;case 2:l=i[n+1],(l&192)===128&&(f=(a&31)<<6|l&63,f>127&&(s=f));break;case 3:l=i[n+1],o=i[n+2],(l&192)===128&&(o&192)===128&&(f=(a&15)<<12|(l&63)<<6|o&63,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:l=i[n+1],o=i[n+2],_=i[n+3],(l&192)===128&&(o&192)===128&&(_&192)===128&&(f=(a&15)<<18|(l&63)<<12|(o&63)<<6|_&63,f>65535&&f<1114112&&(s=f))}}s===null?(s=65533,h=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|s&1023),r.push(s),n+=h}return Le(r)}var W=4096;function Le(i){var e=i.length;if(e<=W)return String.fromCharCode.apply(String,i);for(var t="",r=0;r<e;)t+=String.fromCharCode.apply(String,i.slice(r,r+=W));return t}function $e(i,e,t){var r="";t=Math.min(i.length,t);for(var n=e;n<t;++n)r+=String.fromCharCode(i[n]&127);return r}function Oe(i,e,t){var r="";t=Math.min(i.length,t);for(var n=e;n<t;++n)r+=String.fromCharCode(i[n]);return r}function Ye(i,e,t){var r=i.length;(!e||e<0)&&(e=0),(!t||t<0||t>r)&&(t=r);for(var n="",a=e;a<t;++a)n+=He(i[a]);return n}function qe(i,e,t){for(var r=i.slice(e,t),n="",a=0;a<r.length;a+=2)n+=String.fromCharCode(r[a]+r[a+1]*256);return n}u.prototype.slice=function(e,t){var r=this.length;e=~~e,t=t===void 0?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);var n;if(u.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=u.prototype;else{var a=t-e;n=new u(a,void 0);for(var s=0;s<a;++s)n[s]=this[s+e]}return n};function x(i,e,t){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+e>t)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUIntLE=function(e,t,r){e=e|0,t=t|0,r||x(e,t,this.length);for(var n=this[e],a=1,s=0;++s<t&&(a*=256);)n+=this[e+s]*a;return n};u.prototype.readUIntBE=function(e,t,r){e=e|0,t=t|0,r||x(e,t,this.length);for(var n=this[e+--t],a=1;t>0&&(a*=256);)n+=this[e+--t]*a;return n};u.prototype.readUInt8=function(e,t){return t||x(e,1,this.length),this[e]};u.prototype.readUInt16LE=function(e,t){return t||x(e,2,this.length),this[e]|this[e+1]<<8};u.prototype.readUInt16BE=function(e,t){return t||x(e,2,this.length),this[e]<<8|this[e+1]};u.prototype.readUInt32LE=function(e,t){return t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};u.prototype.readUInt32BE=function(e,t){return t||x(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};u.prototype.readIntLE=function(e,t,r){e=e|0,t=t|0,r||x(e,t,this.length);for(var n=this[e],a=1,s=0;++s<t&&(a*=256);)n+=this[e+s]*a;return a*=128,n>=a&&(n-=Math.pow(2,8*t)),n};u.prototype.readIntBE=function(e,t,r){e=e|0,t=t|0,r||x(e,t,this.length);for(var n=t,a=1,s=this[e+--n];n>0&&(a*=256);)s+=this[e+--n]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*t)),s};u.prototype.readInt8=function(e,t){return t||x(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};u.prototype.readInt16LE=function(e,t){t||x(e,2,this.length);var r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};u.prototype.readInt16BE=function(e,t){t||x(e,2,this.length);var r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};u.prototype.readInt32LE=function(e,t){return t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};u.prototype.readInt32BE=function(e,t){return t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};u.prototype.readFloatLE=function(e,t){return t||x(e,4,this.length),k(this,e,!0,23,4)};u.prototype.readFloatBE=function(e,t){return t||x(e,4,this.length),k(this,e,!1,23,4)};u.prototype.readDoubleLE=function(e,t){return t||x(e,8,this.length),k(this,e,!0,52,8)};u.prototype.readDoubleBE=function(e,t){return t||x(e,8,this.length),k(this,e,!1,52,8)};function b(i,e,t,r,n,a){if(!E(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<a)throw new RangeError('"value" argument is out of bounds');if(t+r>i.length)throw new RangeError("Index out of range")}u.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t=t|0,r=r|0,!n){var a=Math.pow(2,8*r)-1;b(this,e,t,r,a,0)}var s=1,h=0;for(this[t]=e&255;++h<r&&(s*=256);)this[t+h]=e/s&255;return t+r};u.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t=t|0,r=r|0,!n){var a=Math.pow(2,8*r)-1;b(this,e,t,r,a,0)}var s=r-1,h=1;for(this[t+s]=e&255;--s>=0&&(h*=256);)this[t+s]=e/h&255;return t+r};u.prototype.writeUInt8=function(e,t,r){return e=+e,t=t|0,r||b(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function U(i,e,t,r){e<0&&(e=65535+e+1);for(var n=0,a=Math.min(i.length-t,2);n<a;++n)i[t+n]=(e&255<<8*(r?n:1-n))>>>(r?n:1-n)*8}u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=t|0,r||b(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):U(this,e,t,!0),t+2};u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=t|0,r||b(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):U(this,e,t,!1),t+2};function D(i,e,t,r){e<0&&(e=4294967295+e+1);for(var n=0,a=Math.min(i.length-t,4);n<a;++n)i[t+n]=e>>>(r?n:3-n)*8&255}u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=t|0,r||b(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):D(this,e,t,!0),t+4};u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=t|0,r||b(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):D(this,e,t,!1),t+4};u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t=t|0,!n){var a=Math.pow(2,8*r-1);b(this,e,t,r,a-1,-a)}var s=0,h=1,l=0;for(this[t]=e&255;++s<r&&(h*=256);)e<0&&l===0&&this[t+s-1]!==0&&(l=1),this[t+s]=(e/h>>0)-l&255;return t+r};u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t=t|0,!n){var a=Math.pow(2,8*r-1);b(this,e,t,r,a-1,-a)}var s=r-1,h=1,l=0;for(this[t+s]=e&255;--s>=0&&(h*=256);)e<0&&l===0&&this[t+s+1]!==0&&(l=1),this[t+s]=(e/h>>0)-l&255;return t+r};u.prototype.writeInt8=function(e,t,r){return e=+e,t=t|0,r||b(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};u.prototype.writeInt16LE=function(e,t,r){return e=+e,t=t|0,r||b(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):U(this,e,t,!0),t+2};u.prototype.writeInt16BE=function(e,t,r){return e=+e,t=t|0,r||b(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):U(this,e,t,!1),t+2};u.prototype.writeInt32LE=function(e,t,r){return e=+e,t=t|0,r||b(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4};u.prototype.writeInt32BE=function(e,t,r){return e=+e,t=t|0,r||b(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):D(this,e,t,!1),t+4};function le(i,e,t,r,n,a){if(t+r>i.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function ce(i,e,t,r,n){return n||le(i,e,t,4),re(i,e,t,r,23,4),t+4}u.prototype.writeFloatLE=function(e,t,r){return ce(this,e,t,!0,r)};u.prototype.writeFloatBE=function(e,t,r){return ce(this,e,t,!1,r)};function oe(i,e,t,r,n){return n||le(i,e,t,8),re(i,e,t,r,52,8),t+8}u.prototype.writeDoubleLE=function(e,t,r){return oe(this,e,t,!0,r)};u.prototype.writeDoubleBE=function(e,t,r){return oe(this,e,t,!1,r)};u.prototype.copy=function(e,t,r,n){if(r||(r=0),!n&&n!==0&&(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var a=n-r,s;if(this===e&&r<t&&t<n)for(s=a-1;s>=0;--s)e[s+t]=this[s+r];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(s=0;s<a;++s)e[s+t]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a};u.prototype.fill=function(e,t,r,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,r=this.length):typeof r=="string"&&(n=r,r=this.length),e.length===1){var a=e.charCodeAt(0);a<256&&(e=a)}if(n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t=t>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);var s;if(typeof e=="number")for(s=t;s<r;++s)this[s]=e;else{var h=E(e)?e:B(new u(e,n).toString()),l=h.length;for(s=0;s<r-t;++s)this[s+t]=h[s%l]}return this};var Ge=/[^+\/0-9A-Za-z-_]/g;function ze(i){if(i=Qe(i).replace(Ge,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function Qe(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function He(i){return i<16?"0"+i.toString(16):i.toString(16)}function B(i,e){e=e||1/0;for(var t,r=i.length,n=null,a=[],s=0;s<r;++s){if(t=i.charCodeAt(s),t>55295&&t<57344){if(!n){if(t>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(s+1===r){(e-=3)>-1&&a.push(239,191,189);continue}n=t;continue}if(t<56320){(e-=3)>-1&&a.push(239,191,189),n=t;continue}t=(n-55296<<10|t-56320)+65536}else n&&(e-=3)>-1&&a.push(239,191,189);if(n=null,t<128){if((e-=1)<0)break;a.push(t)}else if(t<2048){if((e-=2)<0)break;a.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;a.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;a.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return a}function Ve(i){for(var e=[],t=0;t<i.length;++t)e.push(i.charCodeAt(t)&255);return e}function Ze(i,e){for(var t,r,n,a=[],s=0;s<i.length&&!((e-=2)<0);++s)t=i.charCodeAt(s),r=t>>8,n=t%256,a.push(n),a.push(r);return a}function _e(i){return Re(ze(i))}function M(i,e,t,r){for(var n=0;n<r&&!(n+t>=e.length||n>=i.length);++n)e[n+t]=i[n];return n}function We(i){return i!==i}function Je(i){return i!=null&&(!!i._isBuffer||de(i)||Xe(i))}function de(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function Xe(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&de(i.slice(0,0))}const S="http://www.w3.org/1999/02/22-rdf-syntax-ns#",v="http://www.w3.org/2001/XMLSchema#",$="http://www.w3.org/2000/10/swap/",m={xsd:{decimal:`${v}decimal`,boolean:`${v}boolean`,double:`${v}double`,integer:`${v}integer`,string:`${v}string`},rdf:{type:`${S}type`,nil:`${S}nil`,first:`${S}first`,rest:`${S}rest`,langString:`${S}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${$}reify#forSome`,forAll:`${$}reify#forAll`},log:{implies:`${$}log#implies`}};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let J;var Ke=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:me):i=>(J||(J=Promise.resolve())).then(i).catch(e=>setTimeout(()=>{throw e},0));const et=ye(Ke),{xsd:j}=m,tt=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,X={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},rt=/[\x00-\x20<>\\"\{\}\|\^\`]/,it={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},nt=/$0^/;class st{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const t in this)!(t in it)&&this[t]instanceof RegExp&&(this[t]=nt)}else this._n3Mode=e.n3!==!1;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let r=this._input,n=r.length;for(;;){let h,l;for(;h=this._newline.exec(r);)this._comments&&(l=this._comment.exec(h[0]))&&a("comment",l[1],"",this._line,h[0].length),r=r.substr(h[0].length,r.length),n=r.length,this._line++;if(!h&&(h=this._whitespace.exec(r))&&(r=r.substr(h[0].length,r.length)),this._endOfFile.test(r))return t&&(this._comments&&(l=this._comment.exec(r))&&a("comment",l[1],"",this._line,r.length),r=null,a("eof","","",this._line,0)),this._input=r;const o=this._line,_=r[0];let f="",d="",p="",c=null,g=0,T=!1;switch(_){case"^":if(r.length<3)break;if(r[1]==="^"){if(this._previousMarker="^^",r=r.substr(2),r[0]!=="<"){T=!0;break}}else{this._n3Mode&&(g=1,f="^");break}case"<":if(c=this._unescapedIri.exec(r))f="IRI",d=c[1];else if(c=this._iri.exec(r)){if(d=this._unescape(c[1]),d===null||rt.test(d))return s(this);f="IRI"}else r.length>1&&r[1]==="<"?(f="<<",g=2):this._n3Mode&&r.length>1&&r[1]==="="&&(f="inverse",g=2,d=">");break;case">":r.length>1&&r[1]===">"&&(f=">>",g=2);break;case"_":((c=this._blank.exec(r))||t&&(c=this._blank.exec(`${r} `)))&&(f="blank",p="_",d=c[1]);break;case'"':if(c=this._simpleQuotedString.exec(r))d=c[1];else if({value:d,matchLength:g}=this._parseLiteral(r),d===null)return s(this);(c!==null||g!==0)&&(f="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(c=this._simpleApostropheString.exec(r))d=c[1];else if({value:d,matchLength:g}=this._parseLiteral(r),d===null)return s(this);(c!==null||g!==0)&&(f="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(c=this._variable.exec(r))&&(f="var",d=c[0]);break;case"@":this._previousMarker==="literal"&&(c=this._langcode.exec(r))?(f="langcode",d=c[1]):(c=this._keyword.exec(r))&&(f=c[0]);break;case".":if(r.length===1?t:r[1]<"0"||r[1]>"9"){f=".",g=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(c=this._number.exec(r)||t&&(c=this._number.exec(`${r} `)))&&(f="literal",d=c[0],p=typeof c[1]=="string"?j.double:typeof c[2]=="string"?j.decimal:j.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(c=this._sparqlKeyword.exec(r))?f=c[0].toUpperCase():T=!0;break;case"f":case"t":(c=this._boolean.exec(r))?(f="literal",d=c[0],p=j.boolean):T=!0;break;case"a":(c=this._shortPredicates.exec(r))?(f="abbreviation",d="a"):T=!0;break;case"=":this._n3Mode&&r.length>1&&(f="abbreviation",r[1]!==">"?(g=1,d="="):(g=2,d=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(g=1,f=_);break;default:T=!0}if(T&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(c=this._prefix.exec(r))?(f="prefix",d=c[1]||""):((c=this._prefixed.exec(r))||t&&(c=this._prefixed.exec(`${r} `)))&&(f="prefixed",p=c[1]||"",d=this._unescape(c[2]))),this._previousMarker==="^^")switch(f){case"prefixed":f="type";break;case"IRI":f="typeIRI";break;default:f=""}if(!f)return t||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?s(this):this._input=r;const Q=g||c[0].length,be=a(f,d,p,o,Q);this.previousToken=be,this._previousMarker=f,r=r.substr(Q,r.length)}function a(h,l,o,_,f){const d=r?n-r.length:n,p=d+f,c={type:h,value:l,prefix:o,line:_,start:d,end:p};return e(null,c),c}function s(h){e(h._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(e){let t=!1;const r=e.replace(tt,(n,a,s,h)=>{if(typeof a=="string")return String.fromCharCode(Number.parseInt(a,16));if(typeof s=="string"){let l=Number.parseInt(s,16);return l<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((l-=65536)>>10),56320+(l&1023))}return h in X?X[h]:(t=!0,"")});return t?null:r}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],r=t.length;let n=Math.max(this._literalClosingPos,r);for(;(n=e.indexOf(t,n))>0;){let a=0;for(;e[n-a-1]==="\\";)a++;if(a%2===0){const s=e.substring(r,n),h=s.split(/\r\n|\r|\n/).length-1,l=n+r;if(r===1&&h!==0||r===3&&this._lineMode)break;return this._line+=h,{value:this._unescape(s),matchLength:l}}n++}this._literalClosingPos=e.length-r+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,t){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof t=="function")et(()=>this._tokenizeToEnd(t,!0));else{const r=[];let n;if(this._tokenizeToEnd((a,s)=>a?n=a:r.push(s),!0),n)throw n;return r}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",r=>{this._input!==null&&r.length!==0&&(this._pendingBuffer&&(r=u.concat([this._pendingBuffer,r]),this._pendingBuffer=null),r[r.length-1]&128?this._pendingBuffer=r:(typeof this._input>"u"?this._input=this._readStartingBom(typeof r=="string"?r:r.toString()):this._input+=r,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}const{rdf:at,xsd:P}=m;let L,ut=0;const ht={namedNode:dt,blankNode:pt,variable:gt,literal:xt,defaultGraph:bt,quad:K,triple:K},ft=ht;class A{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof A?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class pe extends A{get termType(){return"NamedNode"}}class N extends A{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&e[t++]==="@"?e.substr(t).toLowerCase():""}get datatype(){return new pe(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,r=t<e.length?e[t]:"";return r==="^"?e.substr(t+2):r!=="@"?P.string:at.langString}equals(e){return e instanceof N?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class lt extends A{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class ct extends A{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class ot extends A{constructor(){return super(""),L||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}L=new ot;class _t extends A{constructor(e,t,r,n){super(""),this._subject=e,this._predicate=t,this._object=r,this._graph=n||L}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function dt(i){return new pe(i)}function pt(i){return new lt(i||`n3-${ut++}`)}function xt(i,e){if(typeof e=="string")return new N(`"${i}"@${e.toLowerCase()}`);let t=e?e.value:"";return t===""&&(typeof i=="boolean"?t=P.boolean:typeof i=="number"&&(Number.isFinite(i)?t=Number.isInteger(i)?P.integer:P.double:(t=P.double,Number.isNaN(i)||(i=i>0?"INF":"-INF")))),t===""||t===P.string?new N(`"${i}"`):new N(`"${i}"^^${t}`)}function gt(i){return new ct(i)}function bt(){return L}function K(i,e,t,r){return new _t(i,e,t,r)}let ee=0;class xe{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&ge(this,e.factory);const t=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(t),n=/trig/.test(t),a=/triple/.test(t),s=/quad/.test(t),h=this._n3Mode=/n3/.test(t),l=a||s;(this._supportsNamedGraphs=!(r||h))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||n||a||h),this._supportsRDFStar=t===""||/star|\*$/.test(t),l&&(this._resolveRelativeIRI=o=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new st({lineMode:l,n3:h}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){ee=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,t,r,n,a){const s=this._n3Mode;this._contextStack.push({type:e,subject:r,predicate:n,object:a,graph:t,inverse:s?this._inversePredicate:!1,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const r=this._contextStack.pop();if(!r||r.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let r;switch(e.type){case"IRI":case"typeIRI":const n=this._resolveIRI(e.value);if(n===null)return this._error("Invalid IRI",e);r=this._namedNode(n);break;case"type":case"prefixed":const a=this._prefixes[e.prefix];if(a===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);r=this._namedNode(a+e.value);break;case"blank":r=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":r=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${t}`,e):(this._subject=null,t==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,r=null,n=this._readListItem;const a=this._subject,s=this._contextStack,h=s[s.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,r=this._blankNode(),this.RDF_FIRST,this._subject=t=this._blankNode()),n=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),s.length!==0&&s[s.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(n=this._readPredicate,this._subject===this.RDF_NIL)return n}else if(n=this._getContextEndReader(),this._object===this.RDF_NIL)return n;r=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,n=this._readListItemDataTypeOrLang):(t=this._literal(e.value,this._namedNode(e.prefix)),n=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((t=this._readEntity(e))===void 0)return}if(r===null&&(this._subject=r=this._blankNode()),a===null?h.predicate===null?h.subject=r:h.object=r:this._emit(a,this.RDF_REST,r,this._graph),t!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,r,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,t,this._graph)}return n}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const r=this._readEntity(e);if(r===void 0)return;t=this._literal(this._literalValue,r),e=null;break;case"langcode":t=this._literal(this._literalValue,e.value),e=null;break}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const r=this._completeLiteral(e);if(r)return this._object=r.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),r.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,r=this._graph;const n=this._subject,a=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,a&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:if(this._supportsQuads&&this._graph===null&&(r=this._readEntity(e))!==void 0){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(n!==null){const s=this._predicate,h=this._object;a?this._emit(h,s,n,r):this._emit(n,s,h,r)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t=e.type==="IRI"&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if((t=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,r=t.length&&t[t.length-1];if(r&&r.type==="item"){const n=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,n,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,r;const n=this._blankNode();if((r=this._readEntity(e))!==void 0)return this._predicate===null?(t=this._subject,this._subject=n):(t=this._object,this._object=n),this._emit(t,r,n,this._graph),this._readPath}_readBackwardPath(e){const t=this._blankNode();let r,n;if((r=this._readEntity(e))!==void 0)return this._predicate===null?(n=this._subject,this._subject=t):(n=this._object,this._object=t),this._emit(t,r,n,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const t=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,r,n){this._callback(null,this._quad(e,t,r,n||this.DEFAULTGRAPH))}_error(e,t){const r=new Error(`${e} on line ${t.line}.`);r.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=O}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let r="",n=-1,a=-1,s=0,h="/";for(;n<t;){switch(h){case":":if(a<0&&e[++n]==="/"&&e[++n]==="/")for(;(a=n+1)<t&&e[a]!=="/";)n=a;break;case"?":case"#":n=t;break;case"/":if(e[n+1]===".")switch(h=e[++n+1],h){case"/":r+=e.substring(s,n-1),s=n+1;break;case void 0:case"?":case"#":return r+e.substring(s,n)+e.substr(n+1);case".":if(h=e[++n+1],h===void 0||h==="/"||h==="?"||h==="#"){if(r+=e.substring(s,n-2),(s=r.lastIndexOf("/"))>=a&&(r=r.substr(0,s)),h!=="/")return`${r}/${e.substr(n+1)}`;s=n+1}}}h=e[++n]}return r+e.substring(s)}parse(e,t,r){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${ee++}_`,this._prefixCallback=r||O,this._inversePredicate=!1,this._quantified=Object.create(null),!t){const n=[];let a;if(this._callback=(s,h)=>{s?a=s:h&&n.push(h)},this._lexer.tokenize(e).every(s=>this._readCallback=this._readCallback(s)),a)throw a;return n}this._callback=t,this._lexer.tokenize(e,(n,a)=>{n!==null?(this._callback(n),this._callback=O):this._readCallback&&(this._readCallback=this._readCallback(a))})}}function O(){}function ge(i,e){const t=e.namedNode;i._namedNode=t,i._blankNode=e.blankNode,i._literal=e.literal,i._variable=e.variable,i._quad=e.quad,i.DEFAULTGRAPH=e.defaultGraph(),i.RDF_FIRST=t(m.rdf.first),i.RDF_REST=t(m.rdf.rest),i.RDF_NIL=t(m.rdf.nil),i.N3_FORALL=t(m.r.forAll),i.N3_FORSOME=t(m.r.forSome),i.ABBREVIATIONS={a:t(m.rdf.type),"=":t(m.owl.sameAs),">":t(m.log.implies)},i.QUANTIFIERS_GRAPH=t("urn:n3:quantifiers")}ge(xe.prototype,ft);const Et=we({content:"",hovered:!1,x:0,y:0,height:0,width:0});function Rt(i,e,t){return r=>{r.key.toLowerCase()===i&&(!t||t.shift&&r.shiftKey)&&e(r)}}async function Ft(i,e,t){const r=await fetch(i,e);return r.status<300&&r.status>=200?await r.text():t||""}function At(i,e){try{return new xe({baseIRI:e}).parse(i)}catch{return[]}}export{H as a,yt as b,me as c,At as d,ye as g,Rt as k,Ft as s,Et as t};
